// This file is auto-generated by @hey-api/openapi-ts

import type { Options as ClientOptions, TDataShape, Client } from './client';
import type { ListTasksData, ListTasksResponses, CreateTaskData, CreateTaskResponses, CreateTaskErrors, CancelTaskData, CancelTaskResponses, CancelTaskErrors, GetTaskData, GetTaskResponses, GetTaskErrors, HealthCheckData, HealthCheckResponses, HealthCheckErrors, ListWorkersData, ListWorkersResponses, GetWorkerData, GetWorkerResponses, GetWorkerErrors, PauseWorkerData, PauseWorkerResponses, PauseWorkerErrors, ResumeWorkerData, ResumeWorkerResponses, ResumeWorkerErrors, GetQueuesData, GetQueuesResponses, PurgeQueueData, PurgeQueueResponses, PurgeQueueErrors, RetryTaskData, RetryTaskResponses, RetryTaskErrors, ClearDlqData, ClearDlqResponses, ListDlqData, ListDlqResponses, RetryDlqData, RetryDlqResponses, RetryDlqErrors, WebsocketConnectData, GetMetricsData, GetMetricsResponses } from './types.gen';
import { client as _heyApiClient } from './client.gen';

export type Options<TData extends TDataShape = TDataShape, ThrowOnError extends boolean = boolean> = ClientOptions<TData, ThrowOnError> & {
    /**
     * You can provide a client instance returned by `createClient()` instead of
     * individual options. This might be also useful if you want to implement a
     * custom client.
     */
    client?: Client;
    /**
     * You can pass arbitrary values through the `meta` object. This can be
     * used to access values that aren't defined as part of the SDK function.
     */
    meta?: Record<string, unknown>;
};

/**
 * Get queue statistics
 * Returns the current depth of each priority queue
 */
export const listTasks = <ThrowOnError extends boolean = false>(options?: Options<ListTasksData, ThrowOnError>) => {
    return (options?.client ?? _heyApiClient).get<ListTasksResponses, unknown, ThrowOnError>({
        url: '/api/v1/tasks',
        ...options
    });
};

/**
 * Create a new task
 * Submits a new task to the queue. Tasks can be executed immediately or scheduled for later.
 * If the queue is at capacity, returns 503 Service Unavailable.
 * Rate limiting applies per client (429 Too Many Requests).
 *
 */
export const createTask = <ThrowOnError extends boolean = false>(options: Options<CreateTaskData, ThrowOnError>) => {
    return (options.client ?? _heyApiClient).post<CreateTaskResponses, CreateTaskErrors, ThrowOnError>({
        url: '/api/v1/tasks',
        ...options,
        headers: {
            'Content-Type': 'application/json',
            ...options.headers
        }
    });
};

/**
 * Cancel a task
 * Cancels a pending or scheduled task. Cannot cancel running tasks.
 */
export const cancelTask = <ThrowOnError extends boolean = false>(options: Options<CancelTaskData, ThrowOnError>) => {
    return (options.client ?? _heyApiClient).delete<CancelTaskResponses, CancelTaskErrors, ThrowOnError>({
        url: '/api/v1/tasks/{taskId}',
        ...options
    });
};

/**
 * Get task by ID
 */
export const getTask = <ThrowOnError extends boolean = false>(options: Options<GetTaskData, ThrowOnError>) => {
    return (options.client ?? _heyApiClient).get<GetTaskResponses, GetTaskErrors, ThrowOnError>({
        url: '/api/v1/tasks/{taskId}',
        ...options
    });
};

/**
 * Health check
 * Returns the health status of the API and Redis connection
 */
export const healthCheck = <ThrowOnError extends boolean = false>(options?: Options<HealthCheckData, ThrowOnError>) => {
    return (options?.client ?? _heyApiClient).get<HealthCheckResponses, HealthCheckErrors, ThrowOnError>({
        url: '/admin/health',
        ...options
    });
};

/**
 * List active workers
 */
export const listWorkers = <ThrowOnError extends boolean = false>(options?: Options<ListWorkersData, ThrowOnError>) => {
    return (options?.client ?? _heyApiClient).get<ListWorkersResponses, unknown, ThrowOnError>({
        url: '/admin/workers',
        ...options
    });
};

/**
 * Get worker details
 */
export const getWorker = <ThrowOnError extends boolean = false>(options: Options<GetWorkerData, ThrowOnError>) => {
    return (options.client ?? _heyApiClient).get<GetWorkerResponses, GetWorkerErrors, ThrowOnError>({
        url: '/admin/workers/{workerId}',
        ...options
    });
};

/**
 * Pause a worker
 * Temporarily stops the worker from processing new tasks
 */
export const pauseWorker = <ThrowOnError extends boolean = false>(options: Options<PauseWorkerData, ThrowOnError>) => {
    return (options.client ?? _heyApiClient).post<PauseWorkerResponses, PauseWorkerErrors, ThrowOnError>({
        url: '/admin/workers/{workerId}/pause',
        ...options
    });
};

/**
 * Resume a worker
 * Resumes task processing for a paused worker
 */
export const resumeWorker = <ThrowOnError extends boolean = false>(options: Options<ResumeWorkerData, ThrowOnError>) => {
    return (options.client ?? _heyApiClient).post<ResumeWorkerResponses, ResumeWorkerErrors, ThrowOnError>({
        url: '/admin/workers/{workerId}/resume',
        ...options
    });
};

/**
 * Get queue statistics
 */
export const getQueues = <ThrowOnError extends boolean = false>(options?: Options<GetQueuesData, ThrowOnError>) => {
    return (options?.client ?? _heyApiClient).get<GetQueuesResponses, unknown, ThrowOnError>({
        url: '/admin/queues',
        ...options
    });
};

/**
 * Purge a queue
 * Removes all messages from the specified priority queue
 */
export const purgeQueue = <ThrowOnError extends boolean = false>(options: Options<PurgeQueueData, ThrowOnError>) => {
    return (options.client ?? _heyApiClient).delete<PurgeQueueResponses, PurgeQueueErrors, ThrowOnError>({
        url: '/admin/queues/{priority}',
        ...options
    });
};

/**
 * Retry a failed task
 * Manually retries a failed or dead_letter task
 */
export const retryTask = <ThrowOnError extends boolean = false>(options: Options<RetryTaskData, ThrowOnError>) => {
    return (options.client ?? _heyApiClient).post<RetryTaskResponses, RetryTaskErrors, ThrowOnError>({
        url: '/admin/tasks/{taskId}/retry',
        ...options
    });
};

/**
 * Clear DLQ
 * Removes all entries from the dead letter queue
 */
export const clearDlq = <ThrowOnError extends boolean = false>(options?: Options<ClearDlqData, ThrowOnError>) => {
    return (options?.client ?? _heyApiClient).delete<ClearDlqResponses, unknown, ThrowOnError>({
        url: '/admin/dlq',
        ...options
    });
};

/**
 * List DLQ entries
 */
export const listDlq = <ThrowOnError extends boolean = false>(options?: Options<ListDlqData, ThrowOnError>) => {
    return (options?.client ?? _heyApiClient).get<ListDlqResponses, unknown, ThrowOnError>({
        url: '/admin/dlq',
        ...options
    });
};

/**
 * Retry DLQ tasks
 * Re-queues one or all tasks from the dead letter queue
 */
export const retryDlq = <ThrowOnError extends boolean = false>(options: Options<RetryDlqData, ThrowOnError>) => {
    return (options.client ?? _heyApiClient).post<RetryDlqResponses, RetryDlqErrors, ThrowOnError>({
        url: '/admin/dlq/retry',
        ...options,
        headers: {
            'Content-Type': 'application/json',
            ...options.headers
        }
    });
};

/**
 * WebSocket connection
 * Establishes a WebSocket connection for real-time events.
 *
 * Event types:
 * - task.submitted
 * - task.started
 * - task.completed
 * - task.failed
 * - task.retrying
 * - worker.joined
 * - worker.left
 * - worker.paused
 * - worker.resumed
 * - queue.depth
 * - system.metrics
 *
 */
export const websocketConnect = <ThrowOnError extends boolean = false>(options?: Options<WebsocketConnectData, ThrowOnError>) => {
    return (options?.client ?? _heyApiClient).get<unknown, unknown, ThrowOnError>({
        url: '/ws',
        ...options
    });
};

/**
 * Prometheus metrics
 * Returns metrics in Prometheus exposition format
 */
export const getMetrics = <ThrowOnError extends boolean = false>(options?: Options<GetMetricsData, ThrowOnError>) => {
    return (options?.client ?? _heyApiClient).get<GetMetricsResponses, unknown, ThrowOnError>({
        url: '/metrics',
        ...options
    });
};